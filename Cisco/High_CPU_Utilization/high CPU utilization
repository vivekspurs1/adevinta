pipeline {
agent any

stages{
stage('Trigger playbook') {
steps {
withCredentials([usernamePassword(credentialsId: 'ansible_user', passwordVariable: 'ansible_user', usernameVariable: 'ansible_user')]) {
sh "ansible-playbook /Adevinta-network/Cisco/High_CPU_Utilization/main.yml -i /Adevinta-network/Cisco/High_CPU_Utilization/inventory --vault-password-file /Adevinta-network/Cisco/pass/pass  --extra-vars hostname=${hostname} --extra-vars devicefamilyname=${devicefamilyname} --extra-vars interfacenumber=${interfacenumber} --extra-vars ansible_user=${ansible_user} --extra-vars incnumber=${incnumber} --extra-vars ipaddress=${ipaddress}"
}
}
}
}
}
