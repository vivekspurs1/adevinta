pipeline {
agent any

stages{
stage('Trigger playbook') {
steps {
  withCredentials([usernamePassword(credentialsId: 'serviceaccount', passwordVariable: 'pass', usernameVariable: 'user')])
  withCredentials([usernamePassword(credentialsId: 'servicenowcredentials', passwordVariable: 'pass', usernameVariable: 'user')]){
    sh "ansible-playbook /Adevinta-network/Cisco/High_CPU_Utilization/main.yml -i /Adevinta-network/Cisco/High_CPU_Utilization/inventory --extra-vars hostname=${hostname} --extra-vars devicefamilyname=${devicefamilyname} --extra-vars interfacenumber=${interfacenumber} --extra-vars incnumber=${incnumber} --extra-vars ipaddress=${ipaddress}"
}
}
}
}
}
